
> tei-dialogue-editor@0.1.0 test
> jest tests/unit/TEIDocument.test.ts

FAIL tests/unit/TEIDocument.test.ts
  TEIDocument
    ✓ should parse basic TEI structure (3 ms)
    ✓ should serialize back to XML (1 ms)
    getDialogue
      ✕ should extract <s> tags with @who attribute as dialogue (1 ms)
      ✓ should extract <said> tags for backward compatibility
      ✕ should handle <s> tags without @who gracefully
      ✓ should return empty array when no dialogue tags present

  ● TEIDocument › getDialogue › should extract <s> tags with @who attribute as dialogue

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      47 |       const dialogue = doc.getDialogue();
      48 |
    > 49 |       expect(dialogue).toHaveLength(2);
         |                        ^
      50 |       expect(dialogue[0].who).toBe('#narrator');
      51 |       expect(dialogue[0].content).toBe('Test passage 1');
      52 |       expect(dialogue[1].who).toBe('#character2');

      at Object.toHaveLength (tests/unit/TEIDocument.test.ts:49:24)

  ● TEIDocument › getDialogue › should handle <s> tags without @who gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      87 |       const dialogue = doc.getDialogue();
      88 |
    > 89 |       expect(dialogue).toHaveLength(1);
         |                        ^
      90 |       expect(dialogue[0].who).toBeUndefined();
      91 |       expect(dialogue[0].content).toBe('Anonymous speech');
      92 |     });

      at Object.toHaveLength (tests/unit/TEIDocument.test.ts:89:24)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 4 passed, 6 total
Snapshots:   0 total
Time:        0.592 s, estimated 1 s
Ran all test suites matching tests/unit/TEIDocument.test.ts.
